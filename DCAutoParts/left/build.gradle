plugins {
    alias(libs.plugins.androidApplication)
    alias(libs.plugins.jetbrainsKotlinAndroid)
    id("io.objectbox")
}

def ver = libs.versions

android {
    namespace ver.appId.get().toString()
    compileSdk ver.compileVersion.get().toInteger()

    defaultConfig {
        applicationId ver.appId.get().toString()
        minSdk ver.minSdkVersion.get().toInteger()
        targetSdk ver.compileVersion.get().toInteger()
        versionCode ver.versionCode.get().toInteger()
        versionName ver.versionName.get().toString()
        signingConfig signingConfigs.debug
    }

    signingConfigs {
        release {
            storeFile file('../apk.jks')
            storePassword 'dcqp231112'
            keyAlias 'leftS223'
            keyPassword 'dcqp231112'
        }
        debug {
            storeFile file('../apk.jks')
            storePassword 'dcqp231112'
            keyAlias 'leftS223'
            keyPassword 'dcqp231112'
        }
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
            signingConfig signingConfigs.release
            renderscriptOptimLevel 1
            android.applicationVariants.all { variant ->
                variant.outputs.all {
                    outputFileName = "AutoParts" + versionCode + ".apk"
                }
            }
        }

        debug {
            minifyEnabled false
            debuggable true
            signingConfig signingConfigs.release
            renderscriptOptimLevel 1
            android.applicationVariants.all { variant ->
                variant.outputs.all {
                    outputFileName = "AutoParts" + versionCode + ".apk"
                }
            }
        }

    }

    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }

    kotlinOptions { jvmTarget = '1.8' }
}

dependencies {
    implementation fileTree(dir: "libs", include: ["*.jar"])
    implementation libs.recyclerview
    implementation libs.recyclerviewSelection
    implementation libs.rxandroid
    implementation libs.rxjava
    implementation libs.baseRecyclerViewAdapterHelper
    implementation libs.eventbus
    implementation libs.fastjson
    implementation libs.squareup.okhttp
    implementation libs.usb
    implementation libs.free.reflection
    implementation libs.anrwatchdog
    implementation libs.popup
    implementation libs.coreprogress
    implementation libs.mapNav
    implementation libs.mapSearch
    implementation libs.library
    implementation libs.roomRuntime
    annotationProcessor libs.roomCompiler
    implementation project(path: ':LibraryAuto')
    implementation project(path: ':LibraryUI')
}